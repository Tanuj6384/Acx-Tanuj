

//////////////////////// TDS CODE LINE WISE ////////////////////////////////////
-----------------------------------------------------
 trigger OnAfterGetRecord() // In Line

  TdsAmount := 0;
  TdsRate := 0;
  PurchInvoiceLineRec.Reset();
  PurchInvoiceLineRec.SetRange("Document No.", "Purch. Inv. Line"."Document No.");
  PurchInvoiceLineRec.SetRange("Line No.", "Purch. Inv. Line"."Line No.");
  if PurchInvoiceLineRec.FindFirst() then begin
    TaxTransactionValue.Reset();
    TaxTransactionValue.SetRange("Tax Record ID", PurchInvoiceLineRec.RecordId);
    TaxTransactionValue.SetRange("Tax Type", 'TDS');
    TaxTransactionValue.SetRange("Value Type", TaxTransactionValue."Value Type"::COMPONENT);
    TaxTransactionValue.SetFilter(Percent, '<>%1', 0);
    if TaxTransactionValue.FindSet() then Begin
    TdsAmount := TaxTransactionValue.Amount;
    TdsRate := TaxTransactionValue.Percent;
          End;
    end;
------------------------------------------------------------
Var
TdsAmount :Decimal;
TdsRate :Decimal;
TaxTransactionValue: Record "Tax Transaction Value";
PurchInvoiceLineRec: Record "Purch. Inv. Line";
//////////////////////// TDS CODE LINE WISE ////////////////////////////////////


//////////////////////// TCS CODE LINE WISE ////////////////////////////////////
------------------------------------------------------------
 trigger OnAfterGetRecord() // In Line

        TCSAmount := 0;
        // TCSRate := 0;
        SaleInvoiceLineRec.Reset();
        SaleInvoiceLineRec.SetRange("Document No.", "Sales Invoice Line"."Document No.");
        SaleInvoiceLineRec.SetRange("Line No.", "Sales Invoice Line"."Line No.");
        if SaleInvoiceLineRec.FindFirst() then begin
            TaxTransactionValue.Reset();
            TaxTransactionValue.SetRange("Tax Record ID", SaleInvoiceLineRec.RecordId);
            TaxTransactionValue.SetRange("Tax Type", 'TCS');
            TaxTransactionValue.SetRange("Value Type", TaxTransactionValue."Value Type"::COMPONENT);
            TaxTransactionValue.SetFilter(Percent, '<>%1', 0);
                if TaxTransactionValue.FindSet() then
                     TCSAmount := TaxTransactionValue.Amount;
                        // TCSRate := TaxTransactionValue.Percent;
                    end;
------------------------------------------------------------
   Var
    TCSAmount :Decimal;
    TCSRate :Decimal;
    TaxTransactionValue: Record "Tax Transaction Value";
    SaleInvoiceLineRec: Record "Sale Invoice Header";

//////////////////////// TCS CODE LINE WISE ////////////////////////////////////







----------------------------------------------------------------------------
In Page Start
-----------------------------------------------------------------------------
local procedure CalculateTDSAmount()
    var
        recTDSSection: Record "TDS Section";
        recTDSSetup: Record "Iappc TDS Setup";
        recVendor: Record Vendor;
    begin
        "TDS Amount" := 0;
        "TDS %" := 0;
        if ("Account Type" = "Account Type"::Vendor) and ("Account No." <> '') and ("TDS Section Code" <> '') and ("Debit Amount" <> 0) and ("Bal. Account No." <> '') then begin
            if "TDS Base Amount" = 0 then "TDS Base Amount" := "Debit Amount";
            recTDSSection.Get(Rec."TDS Section Code");
            recVendor.Get(Rec."Account No.");
            recVendor.TestField("Assessee Code");
            recTDSSetup.Reset();
            recTDSSetup.SetRange("TDS Section", Rec."TDS Section Code");
            recTDSSetup.SetRange("Assessee Code", recVendor."Assessee Code");
            recTDSSetup.SetRange("Effective Date", 0D, Rec."Posting Date");
            if recTDSSetup.FindLast() then
                "TDS %" := recTDSSetup."TDS %";
            "TDS Amount" := Round("TDS Base Amount" * "TDS %" / 100, 1);
        end;
    end;
----------------------------------------------------------------------------
In Page End 
-----------------------------------------------------------------------------
    /// Change With Tds rates table recTDSSetup
